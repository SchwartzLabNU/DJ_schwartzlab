function [filename_parts, datasetname_parts, var_parts, filename_example, datasetname_example, varName_example] = parseExportSettings(exportState, entry)
%resultLevel = fieldnames(rmfield(exportState,'base_filename'));
input = entry.input;































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































filename_parts = {};
datasetname_parts = {};
var_parts = {};

switch exportState.Animals.saveas
    case 'h5_filename'
        filename_parts = ['__a', 'animal_id'];
    case 'dataset (Igor folder)'
        datasetname_parts = ['__a', 'animal_id'];        
    case 'variable names'
        var_parts = ['__a', 'animal_id'];            
end

switch exportState.Eyes.saveas
    case 'h5_filename'
        filename_parts = [filename_parts, '__eye', 'side'];
    case 'dataset (Igor folder)'
        datasetname_parts = [datasetname_parts, '__eye', 'side'];    
    case 'variable names'
        var_parts = [var_parts, '__eye', 'side'];            
end
        
switch exportState.Cells.saveas
    case 'h5_filename'
        filename_parts = [filename_parts, '__c', 'cell_id'];
    case 'dataset (Igor folder)'
        datasetname_parts = [datasetname_parts,  '__c', 'cell_id'];    
    case 'variable names'
        var_parts = [var_parts,  '__c', 'cell_id'];            
end

switch exportState.Datasets.saveas
    case 'h5_filename'
        filename_parts = [filename_parts,  '__ds', 'dataset_name', '__ch', 'channel'];
    case 'dataset (Igor folder)'
        datasetname_parts = [datasetname_parts,  '__ds', 'dataset_name', '__ch', 'channel'];    
    case 'variable names'
        var_parts = [var_parts,  '__ds', 'cell_id'];            
end

switch exportState.Epochs.saveas
    case 'h5_filename'
        filename_parts = [filename_parts, '__e', 'epoch_number'];
    case 'dataset (Igor folder)'
        datasetname_parts = [datasetname_parts,  '__e', 'epoch_number'];    
    case 'variable names'
        var_parts = [var_parts,  '__e', 'epoch_number'];            
end

switch exportState.ResultFields.saveas
    case 'h5_filename'
        filename_parts = [filename_parts, '__r', 'varName'];
    case 'dataset (Igor folder)'
        datasetname_parts = [datasetname_parts,  '__r', 'varName'];    
    case 'variable names'
        var_parts = [var_parts,  '__r', 'varName'];            
end

retinalCell = sl.MeasuredRetinalCell & entry;
side = fetch1(retinalCell, 'side');
animal_id = entry.animal_id;
cell_id = entry.cell_id;
if isfield(entry, 'channel')
    channel = entry.channel;
end
if isfield(entry, 'dataset_name')
    dataset_name = entry.dataset_name;
end
if isfield(entry, 'epoch_number')
    epoch_number = entry.epoch_number;
end


filename_example = [];
for i=1:length(filename_parts)
    if rem(i,2)==1
        filename_example = [filename_example, filename_parts{i}];
    else
        
    end
end


%'__ds', 'dataset_name', '__ch', 'channel']; 