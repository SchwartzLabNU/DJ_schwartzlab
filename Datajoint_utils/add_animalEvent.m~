function [] = add_animalEvent(key, event_type)
C = dj.conn;
C.startTransaction
try 
    key_AnimalEvent.date = key.date;    
    eventsThisDate = sl_test.AnimalEvent & ['date=' '"' key.date '"'];
    if eventsThisDate.exists
        key_AnimalEvent.event_id = max(fetchn(eventsThisDate, 'event_id')) + 1;
    else
        key_AnimalEvent.event_id = 1;
    end
    insert(sl_test.AnimalEvent, key_AnimalEvent);
    
    key_partTable = rmfield(key,'date');
    insert(eval9sl_test.AnimalEvent, key_AnimalEvent);
    
    disp('Insert successful');
    C.commitTransaction;    
catch
    errordlg('Insert failed');
    C.cancelTransaction;
end